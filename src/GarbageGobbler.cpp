#include "GarbageGobbler.h"
#include "Log.h"


///////////////////////////////////////////////////////////////////////////////
// HELPERS
///////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////
// {CON|DE}STRUCTORS
///////////////////////////////////////////////////////////////////////////////

GarbageGobbler::GarbageGobbler() {

}


GarbageGobbler::~GarbageGobbler() {

}


///////////////////////////////////////////////////////////////////////////////
// METHODS
///////////////////////////////////////////////////////////////////////////////

GarbageGobbler* GarbageGobbler::Instance() {
	static GarbageGobbler mInstance;
	return &mInstance;
}


void GarbageGobbler::Discard(SDL_Surface* sfc) {
	mSurfacesToDelete.push_back(sfc);
}


bool GarbageGobbler::IsEmpty() {
	return mSurfacesToDelete.size() == 0;
}


void GarbageGobbler::Gobble() {
	if (mSurfacesToDelete.size() > 0) {
		SDL_Surface* s = mSurfacesToDelete.back();
		mSurfacesToDelete.pop_back();
		SDL_FreeSurface(s);
		return;
	}
}
